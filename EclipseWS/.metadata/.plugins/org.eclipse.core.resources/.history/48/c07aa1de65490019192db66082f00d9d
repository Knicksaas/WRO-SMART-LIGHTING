package ch.nte.wro.main;

import ch.nte.wro.linefollower.LinefollowerUntilJunction;
import ch.nte.wro.linefollower.LinefollowerUntilLight;
import ch.nte.wro.motion.PickUpLight;
import ch.nte.wro.motion.Turn;
import ch.nte.wro.motion.motorsOFF;
import ch.nte.wro.motion.motorsON;
import ch.nte.wro.sensors.RGBColorSensorChecker;
import ch.nte.wro.status.GlobalSensors;
import ch.nte.wro.status.LightArrangement;
import lejos.robotics.RegulatedMotor;
import lejos.utility.Delay;

public class RedAndGreenAufräumen {

	private int speed;
	private RegulatedMotor mLeft;
	private RegulatedMotor mRight;
	private boolean lightA;
	private boolean lightB;
	private boolean lightC;
	private boolean lightD;
	
	public RedAndGreenAufräumen(int speed, RegulatedMotor mLeft, RegulatedMotor mRight) {
		this.speed = speed;
		this.mLeft = mLeft;
		this.mRight = mRight;
		
		lightA = driveToLightA();
		if(lightA) {
			if((LightArrangement.lightA.equalsIgnoreCase("red")) && (LightArrangement.area1Red == "black")) {
				//TODO: Drive to K3
				unload1BlockFromK3inAreaRed();
			}
		}
	
	}
	
	private boolean driveToLightA() {
		new motorsON(speed, mLeft, mRight, true);
		Delay.msDelay((50*500)/speed);
		new motorsOFF(mLeft, mRight);
		new Turn(speed, 90, mLeft, mRight);
		LinefollowerUntilLight lul = new LinefollowerUntilLight(speed, mLeft, mRight, 60);
		if(lul.isThereALight()) {
			RGBColorSensorChecker rgb = new RGBColorSensorChecker(GlobalSensors.colorSensorFront);
			rgb.checkSensor();
			LightArrangement.lightA = rgb.getColor();
			new PickUpLight(speed, mLeft, mRight);
			return true;
		}
		LightArrangement.lightA = null;
		return false;
	}
	
	private boolean driveToLightB() {
		
		return false;
	}
	
	private void unload1BlockFromK3inAreaRed() {
		new LinefollowerUntilJunction(speed*2, mLeft, mRight, 60);
		new LinefollowerUntilJunction(speed*2, mLeft, mRight, 60);
	}
}
